<div class="flex h-screen bg-slate-100 overflow-hidden relative font-sans">
  
  <!-- Sidebar -->
  <aside 
    class="bg-gradient-to-b from-slate-900 to-slate-800 text-white flex flex-col fixed md:relative h-full z-20 transition-all duration-300 ease-in-out shadow-xl print:hidden border-r border-slate-700"
    [class.-translate-x-full]="!isSidebarOpen()"
    [class.md:translate-x-0]="true"
    [class.w-64]="!isCollapsed()"
    [class.w-20]="isCollapsed()">
    
    <!-- Header da Sidebar -->
    <div class="h-16 flex items-center justify-between px-4 border-b border-slate-700/50 bg-slate-900/50">
      <div class="flex items-center gap-3 overflow-hidden whitespace-nowrap">
        <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-primary to-emerald-500 flex items-center justify-center shrink-0 shadow-lg shadow-emerald-900/20">
          <span class="material-icons-outlined text-white text-lg">security</span>
        </div>
        
        @if (!isCollapsed()) {
          <div class="animate-fadeIn">
            <h1 class="font-bold text-lg tracking-tight leading-none text-slate-100">SIVIG</h1>
            <p class="text-[10px] text-emerald-400 font-medium tracking-wider">ARGOS PANOPTES</p>
          </div>
        }
      </div>
      
      <!-- Botão de Colapso (Apenas Desktop) -->
      <button (click)="toggleCollapse()" class="hidden md:flex text-slate-400 hover:text-white transition-colors p-1 rounded hover:bg-slate-700">
        <span class="material-icons-outlined text-lg">{{ isCollapsed() ? 'chevron_right' : 'chevron_left' }}</span>
      </button>
    </div>

    <!-- Navegação -->
    <nav class="flex-1 py-6 px-3 space-y-2 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-700">
      
      <!-- Item: Visão Geral -->
      <button (click)="setView('intro')" 
              class="w-full flex items-center gap-3 px-3 py-3 rounded-xl text-sm font-medium transition-all duration-200 group relative overflow-hidden"
              [class.bg-white/10]="currentView() === 'intro'"
              [class.text-white]="currentView() === 'intro'"
              [class.text-slate-400]="currentView() !== 'intro'"
              [class.hover:bg-white/5]="currentView() !== 'intro'"
              [class.hover:text-slate-200]="currentView() !== 'intro'"
              [class.justify-center]="isCollapsed()">
        
        @if(currentView() === 'intro') {
          <div class="absolute left-0 top-0 bottom-0 w-1 bg-primary rounded-r"></div>
        }

        <span class="material-icons-outlined text-xl group-hover:scale-110 transition-transform duration-200"
              [class.text-primary]="currentView() === 'intro'">info</span>
        
        @if (!isCollapsed()) {
          <span class="animate-fadeIn whitespace-nowrap">Visão Geral</span>
        }
      </button>

      <!-- Item: Dashboard -->
      <button (click)="setView('dashboard')" 
              class="w-full flex items-center gap-3 px-3 py-3 rounded-xl text-sm font-medium transition-all duration-200 group relative overflow-hidden"
              [class.bg-white/10]="currentView() === 'dashboard'"
              [class.text-white]="currentView() === 'dashboard'"
              [class.text-slate-400]="currentView() !== 'dashboard'"
              [class.hover:bg-white/5]="currentView() !== 'dashboard'"
              [class.justify-center]="isCollapsed()">
        
        @if(currentView() === 'dashboard') {
          <div class="absolute left-0 top-0 bottom-0 w-1 bg-primary rounded-r"></div>
        }

        <span class="material-icons-outlined text-xl group-hover:scale-110 transition-transform duration-200"
              [class.text-primary]="currentView() === 'dashboard'">dashboard</span>
        
        @if (!isCollapsed()) {
          <span class="animate-fadeIn whitespace-nowrap">Dashboard</span>
        }
      </button>

      <!-- Item: Metas -->
      <button (click)="setView('goals')" 
              class="w-full flex items-center gap-3 px-3 py-3 rounded-xl text-sm font-medium transition-all duration-200 group relative overflow-hidden"
              [class.bg-white/10]="currentView() === 'goals'"
              [class.text-white]="currentView() === 'goals'"
              [class.text-slate-400]="currentView() !== 'goals'"
              [class.hover:bg-white/5]="currentView() !== 'goals'"
              [class.justify-center]="isCollapsed()">
        
        @if(currentView() === 'goals') {
          <div class="absolute left-0 top-0 bottom-0 w-1 bg-primary rounded-r"></div>
        }

        <span class="material-icons-outlined text-xl group-hover:scale-110 transition-transform duration-200"
              [class.text-primary]="currentView() === 'goals'">flag</span>
        
        @if (!isCollapsed()) {
          <span class="animate-fadeIn whitespace-nowrap">Metas Estratégicas</span>
        }
      </button>

      <!-- Item: Conhecimento -->
      <button (click)="setView('knowledge')" 
              class="w-full flex items-center gap-3 px-3 py-3 rounded-xl text-sm font-medium transition-all duration-200 group relative overflow-hidden"
              [class.bg-white/10]="currentView() === 'knowledge'"
              [class.text-white]="currentView() === 'knowledge'"
              [class.text-slate-400]="currentView() !== 'knowledge'"
              [class.hover:bg-white/5]="currentView() !== 'knowledge'"
              [class.justify-center]="isCollapsed()">
        
        @if(currentView() === 'knowledge') {
          <div class="absolute left-0 top-0 bottom-0 w-1 bg-primary rounded-r"></div>
        }

        <span class="material-icons-outlined text-xl group-hover:scale-110 transition-transform duration-200"
              [class.text-primary]="currentView() === 'knowledge'">folder_special</span>
        
        @if (!isCollapsed()) {
          <span class="animate-fadeIn whitespace-nowrap">Base de Conhecimento</span>
        }
      </button>

      <!-- Item: Documentos -->
      <button (click)="setView('documents')" 
              class="w-full flex items-center gap-3 px-3 py-3 rounded-xl text-sm font-medium transition-all duration-200 group relative overflow-hidden"
              [class.bg-white/10]="currentView() === 'documents'"
              [class.text-white]="currentView() === 'documents'"
              [class.text-slate-400]="currentView() !== 'documents'"
              [class.hover:bg-white/5]="currentView() !== 'documents'"
              [class.justify-center]="isCollapsed()">
        
        @if(currentView() === 'documents') {
          <div class="absolute left-0 top-0 bottom-0 w-1 bg-primary rounded-r"></div>
        }

        <span class="material-icons-outlined text-xl group-hover:scale-110 transition-transform duration-200"
              [class.text-primary]="currentView() === 'documents'">description</span>
        
        @if (!isCollapsed()) {
          <span class="animate-fadeIn whitespace-nowrap">Documentos Oficiais</span>
        }
      </button>

      <div class="h-px bg-slate-700/50 my-2 mx-2"></div>

      <!-- Item: Assistente IA -->
      <button (click)="setView('chat')" 
              class="w-full flex items-center gap-3 px-3 py-3 rounded-xl text-sm font-medium transition-all duration-200 group relative overflow-hidden bg-gradient-to-r from-primary/10 to-transparent border border-primary/20 hover:border-primary/40"
              [class.bg-white/10]="currentView() === 'chat'"
              [class.text-white]="currentView() === 'chat'"
              [class.text-emerald-300]="currentView() !== 'chat'"
              [class.justify-center]="isCollapsed()">
        
        <span class="material-icons-outlined text-xl group-hover:rotate-12 transition-transform duration-200 text-emerald-400">psychology</span>
        
        @if (!isCollapsed()) {
          <div class="flex flex-col items-start animate-fadeIn">
            <span class="leading-none">Assistente IA</span>
            <span class="text-[10px] text-emerald-500/80 leading-tight mt-0.5">Online</span>
          </div>
        }
      </button>
    </nav>

    <!-- Footer da Sidebar -->
    <div class="p-4 border-t border-slate-700/50 bg-slate-900/30">
      <div class="flex items-center gap-3" [class.justify-center]="isCollapsed()">
        <div class="relative">
          <div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center text-slate-300 border border-slate-600">
            <span class="material-icons-outlined text-sm">person</span>
          </div>
          <span class="absolute bottom-0 right-0 w-2.5 h-2.5 bg-emerald-500 border-2 border-slate-900 rounded-full"></span>
        </div>
        
        @if (!isCollapsed()) {
          <div class="overflow-hidden animate-fadeIn">
            <p class="text-xs font-medium text-slate-200 truncate">Rafael Amaro Silvério</p>
            <p class="text-[10px] text-slate-500 truncate">Diretor de Vigilância em Saúde</p>
          </div>
        }
      </div>
    </div>
  </aside>

  <!-- Mobile Overlay -->
  @if (isSidebarOpen()) {
    <div class="fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-10 md:hidden print:hidden transition-opacity" (click)="toggleSidebar()"></div>
  }

  <!-- Main Content -->
  <main class="flex-1 flex flex-col h-full overflow-hidden w-full bg-slate-100 print:bg-white print:overflow-visible transition-all duration-300">
    
    <!-- Mobile Header -->
    <header class="md:hidden bg-white border-b border-slate-200 p-4 flex items-center gap-4 shadow-sm z-10 print:hidden">
      <button (click)="toggleSidebar()" class="text-slate-600 hover:text-primary transition-colors p-1 rounded-full hover:bg-slate-100">
        <span class="material-icons-outlined">menu</span>
      </button>
      <div>
        <h1 class="font-bold text-slate-800 text-sm leading-tight">SIVIG</h1>
        <p class="text-[10px] text-slate-500 leading-tight">Sistema Integrado de Vigilância</p>
      </div>
    </header>

    <div class="flex-1 overflow-hidden relative print:overflow-visible">
      @switch (currentView()) {
        @case ('intro') { <app-intro class="h-full block animate-fadeIn print:hidden"/> }
        @case ('dashboard') { <app-dashboard class="h-full block animate-fadeIn print:hidden"/> }
        @case ('goals') { <app-goals class="h-full block animate-fadeIn print:hidden"/> }
        @case ('knowledge') { <app-knowledge class="h-full block animate-fadeIn print:hidden"/> }
        @case ('documents') { <app-documents class="h-full block animate-fadeIn"/> }
        @case ('chat') { <app-chat class="h-full block animate-fadeIn print:hidden"/> }
      }
    </div>
  </main>
</div>
